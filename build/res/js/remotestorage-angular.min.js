/*! built for dogfeed 2013-06-23 */
angular.module("ngRemoteStorage",[]).value("RSutil",{encode:function(a){return console.log("rsutil encode: ",a),encodeURIComponent(escape(a))}}).factory("RS",["$rootScope","$q","$timeout",function(a,b,c){function d(){return e}var e=!1;return remoteStorage.on("ready",function(){e=!0}),{isConnected:d,call:function(e,f,g){var h=b.defer();return console.log("RS.call("+e+", "+f+", params):",g),"object"==typeof g&&"undefined"==typeof g[0]?h.reject("RS.call params must be an array"):function i(){if(d())try{remoteStorage[e][f].apply(null,g).then(function(b){a.$apply(function(){h.resolve(b)})},function(b){a.$apply(function(){h.reject(b)})})}catch(b){console.log("error : ",b),h.reject(b)}else console.log("RS not connected yet, delaying call 1s"),c(i,1e3)}(),h.promise}}}]).controller("remoteStorageCtrl",[function(){remoteStorage.util.silenceAllLoggers(),remoteStorage.claimAccess({sockethub:"rw",rss:"rw",articles:"rw"}).then(function(){remoteStorage.displayWidget("remotestorage-connect",{redirectUri:window.location.protocol+"//"+window.location.host+"/rscallback.html"}),remoteStorage.sockethub.init(),remoteStorage.rss.init()})}]);